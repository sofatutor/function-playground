---
description: 
globs: 
alwaysApply: true
---

# Working Agreement & Process Documentation

## Core Workflow Rules (as followed in this PR)

### 1. WIP and PLAN as Source of Truth
- **WIP.md** is updated immediately with any project progress, task completion, or workflow change.
- **PLAN.md** is the central reference for project architecture, objectives, and implementation steps. Any major change in direction or scope is reflected there.
- Before any PR is approved or merged, WIP and PLAN are checked for consistency and completeness.

### 2. Testing Discipline
- Write or update unit tests for functional changes (Jest + RTL).
- Add E2E tests (Playwright) for critical flows.
- Keep or improve coverage for changed areas; avoid adding tests for unused code.

### 3. Review and Feedback Process
- All review comments are addressed directly in code or documentation—no TODOs are left unresolved.
- For performance or architectural feedback (e.g., cache eviction), the solution is implemented immediately, not deferred.
- All changes are validated with tests (including `-race` for concurrency) and linters before considering a PR resolved.

### 4. Transparency and Traceability
- Every significant change, fix, or workflow update is reflected in WIP.markdown.
- The process and rationale for changes are documented for future reference.
- The project is managed in small, reviewable increments, with clear status tracking in WIP.

### 5. Coding Best Practices
- TypeScript best practices: clear naming, explicit exported types, thoughtful error handling.
- Code is kept DRY, simple, and maintainable.
- All exported types and functions are documented where useful.

---

## Example: How This PR Was Handled
- Review comments were fetched and addressed one by one.
- For performance feedback (cache eviction), a min-heap was implemented immediately.
- All changes were tested (`make test-coverage`) and linted (`make lint`).
- WIP.markdown is updated to reflect the current state and process.

---

## Summary Table
| Rule/Practice                | Enforced in this PR? |
|------------------------------|:--------------------:|
| WIP.markdown always current  |          ✅           |
| PLAN.markdown as reference   |          ✅           |
| TDD-first, 90%+ coverage     |          ✅           |
| All review comments resolved |          ✅           |
| No TODOs left in code        |          ✅           |
| All changes tested/linted    |          ✅           |
| Go best practices            |          ✅           |

---

**Always follow these rules for every PR and workflow step.**